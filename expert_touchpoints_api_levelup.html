<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Expert Touchpoints + API Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --ink:#111; --line:#e6e6e6; --bg:#fff; --muted:#666; --brand:#c62828; }
    body { font-family: system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif; color:var(--ink); margin:0; background:var(--bg); }
    header { padding:18px 20px; border-bottom:1px solid var(--line); }
    h1 { margin:0 0 6px; font-size:20px; }
    main { max-width:1100px; margin:0 auto; padding:24px 18px 64px; display:grid; gap:24px; }
    .card { border:1px solid var(--line); border-radius:14px; padding:16px; }
    .row { display:flex; gap:16px; flex-wrap:wrap; align-items:flex-start; }
    button, a.button { background:var(--brand); color:#fff; border:none; border-radius:10px; padding:10px 14px; cursor:pointer; text-decoration:none; }
    code { background:#fafafa; border:1px solid var(--line); padding:2px 6px; border-radius:6px; }
    pre { background:#fafafa; border:1px solid var(--line); padding:10px; border-radius:10px; overflow:auto; }
    iframe { width:100%; height:420px; border:1px solid var(--line); border-radius:12px; }
    small { color:var(--muted); }
  </style>
</head>
<body>
  <header>
    <h1>Expert Touchpoints + API Demo</h1>
    <small>Search-in-Place • Contextual Help • Simple API call</small>
  </header>

  <main>
    <!-- 1) Search-in-Place Touchpoint -->
    <section class="card">
      <h2>Search-in-Place</h2>
      <p>Type to search your Expert content right here.</p>
      <!-- Paste the Touchpoint embed snippet generated by Expert below -->
      <!-- BEGIN: Search-in-Place embed -->
      <!-- YOUR_TOUCHPOINT_SNIPPET -->
      <!-- END: Search-in-Place embed -->
      <p><small>Docs: Search-in-Place Touchpoint.</small></p>
    </section>

    <!-- 2) Contextual Help link (opens overlay) -->
    <section class="card">
      <h2>Contextual Help Button</h2>
      <p>Click the button to open a help article in a contextual overlay.</p>
      <div class="row">
        <a class="button mt-contextual-help" 
           href="https://YOUR_EXPERT_SITE/Some/Helpful/Article"
           target="_blank" rel="noopener">
          Open Help
        </a>
      </div>
      <p><small>Docs: Contextual Help Button Touchpoint.</small></p>
    </section>

    <!-- 3) Minimal API call with a Browser API Token -->
    <section class="card">
      <h2>API Demo (Browser Token)</h2>
      <p>Fetch page info via <code>/@api/deki</code> using <code>fetch()</code> and a Browser API Token.</p>
      <div class="row">
        <button id="btnFetch">Fetch Page JSON</button>
        <input id="pagePath" type="text" size="40" placeholder="/Some/Helpful/Article" />
      </div>
      <pre id="out">{ click “Fetch Page JSON” }</pre>
      <p><small>Docs: Getting Started with the API • Use a Browser API Token with an Integration.</small></p>
    </section>

    <!-- 4) Optional: inline Embedded Contextual Help (swap in your embed snippet) -->
    <section class="card">
      <h2>Embedded Contextual Help (inline)</h2>
      <!-- BEGIN: Embedded Contextual Help Touchpoint embed (optional) -->
      <!-- YOUR_TOUCHPOINT_SNIPPET -->
      <!-- END: Embedded Contextual Help Touchpoint embed -->
      <p><small>Docs: Embedded Contextual Help Touchpoint.</small></p>
    </section>
  </main>

  <script>
    // ====== API demo using Browser API Token ======
    // Replace with a Browser API Token created in Expert. Keep scope minimal for demos.
    const BROWSER_TOKEN = 'YOUR_BROWSER_TOKEN';
    const SITE = 'https://YOUR_EXPERT_SITE';

    async function fetchPage(path) {
      const url = `${SITE}/@api/deki/pages/=${encodeURIComponent(path)}?format=json`;
      const res = await fetch(url, {
        headers: { 'X-Deki-Token': BROWSER_TOKEN }
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      return res.json();
    }

    document.getElementById('btnFetch').addEventListener('click', async () => {
      const out = document.getElementById('out');
      const path = document.getElementById('pagePath').value.trim() || '/';
      out.textContent = 'Loading...';
      try {
        const data = await fetchPage(path);
        out.textContent = JSON.stringify(data, null, 2);
      } catch (e) {
        out.textContent = `Error: ${e.message}`;
      }
    });
  </script>
</body>
</html>
